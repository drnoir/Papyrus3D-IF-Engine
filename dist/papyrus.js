(()=>{let t,e,i,s,n=0,o=0;document.querySelector("a-scene"),document.querySelector("a-assets");const a=document.getElementById("dialogueID");function r(t){console.log(e.characters[t].id,e.characters[t].name);let i=e.characters[t].id,s="#"+i;console.log(i);let n=document.createElement("a-entity");return n.setAttribute("id",e.characters[t].name),n.setAttribute("name",e.characters[t].name),n.setAttribute("gltf-model",s),n.setAttribute("scale","3 3 3"),n.setAttribute("animation-mixer","clip: *; loop: repeat;"),n}function c(t,e){let i=document.createElement("a-box");i.setAttribute("id",i+[e]);let s=document.createElement("a-entity");return s.setAttribute("light","type: point; intensity: 0.75; distance: 50; decay: 2"),s.setAttribute("color"+t),i.appendChild(s),i}!async function(){await async function(){const e=await fetch("/config.json");t=await e.json()}(),await async function(){const t=await fetch("/scenes/charecters.json");e=await t.json()}(),await async function(t){const e=await fetch("./InfernoDemo/scenes/scene1/dialogue.json");i=await e.json()}(),await async function(t){const e=await fetch("./InfernoDemo/scenes/scene1/map.json");o=await e.json()}(),await async function(t){const e=await fetch("./InfernoDemo/scenes/scene1/scene.json");s=await e.json()}(),await function(){const t=o.data;console.log(t,o.height);let e=s.roomtype;o.chars,o.charnumber;let i=0;const n=document.getElementById("room");let a;if("Indoor"===e){let t=document.createElement("a-box"),e=o.width*o.height;t.setAttribute("width",2*e),t.setAttribute("height",2*e),t.setAttribute("rotation","-90 0 0"),t.setAttribute("position","0 6 0"),t.setAttribute("scale","0.2 0.2 0.2"),t.setAttribute("material","src: #grunge; repeat: 1 2"),n.appendChild(t)}for(var l=0;l<o.height;l++)for(var u=0;u<o.width;u++){const e=u*o.width+l,s=`${5*(l-o.width/2)} 0 ${5*(u-o.height/2)}`,h=`${5*(l-o.width/2)} -3 ${5*(u-o.height/2)}`,d=`${5*(l-o.width/2)} -4 ${5*(u-o.height/2)}`,b=`${5*(l-o.width/2)} 2.5 ${5*(u-o.height/2)/1.2}`;if("string"==typeof t[e]&&"c"===t[e].charAt(0)&&"h"===t[e].charAt(1)){console.log("its a char!");let t=r(i);console.log("char ran and char is"+t),t.setAttribute("position",d),n.appendChild(t),i++}else if("string"==typeof t[e]&&"t"===t[e].charAt(0)){console.log("its a torch!");let t=c("yellow",e);console.log("torch ran and char is"+t),t.setAttribute("position",b),t.setAttribute("position",b),n.appendChild(t)}else if("string"==typeof t[e]&&"c"===t[e].charAt(0)&&"a"===t[e].charAt(1)){const t=document.createElement("a-entity");t.setAttribute("id","cam"+[e]),t.setAttribute("position",s),document.createElement("a-box").setAttribute("visible",!1),n.appendChild(t)}if(0===t[e]||1===t[e]||2==t[e]||3===t[e])if(a=document.createElement("a-box"),a.setAttribute("width",5),a.setAttribute("height",15),a.setAttribute("depth",5),a.setAttribute("position",s),console.log(n,a),n.appendChild(a),0===t[e]&&(a.setAttribute("height",.75),a.setAttribute("static-body",""),a.setAttribute("position",s),a.setAttribute("editor-listener","")),2===t[e])a.setAttribute("height",7.5),a.setAttribute("static-body",""),a.setAttribute("position",h);else if(3===t[e]){const t=document.createElement("a-box");t.setAttribute("id",t),t.setAttribute("material","src: #door; repeat: 1 1"),t.setAttribute("locked","false")}else a.setAttribute("color","#fff"),a.setAttribute("material","src: #brick; repeat: 1 1"),a.setAttribute("static-body","")}}(),await function(t,e){!function(t){if(console.log("charID passed"+t),document.getElementById("nextPassageBtn"))console.log("Opps something went wrong - There is already a passage btn on the scene");else{let e=document.createElement("a-box");e.setAttribute("id","nextPassageBtn"),e.setAttribute("cursor-listener",""),e.setAttribute("depth","0.01"),e.setAttribute("height","0.15"),e.setAttribute("width","0.15"),e.setAttribute("material","color: red"),e.setAttribute("position","0.2 1.6 0.1");let i=document.createElement("a-text");i.setAttribute("value",">"),i.setAttribute("height","1"),i.setAttribute("width","3"),i.setAttribute("position","-0.05 0.015 0.1"),e.appendChild(i),document.getElementById(t).appendChild(e)}}(e);let s=i.passage[t].text,o=i.passage[t].char;n=t,a.setAttribute("text","wrapCount:125"),a.setAttribute("text","width:3",2),a.setAttribute("text","value:"+o+"\n"+s)}(0),console.log(t,e,i,o)}()})();